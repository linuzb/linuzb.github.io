<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Jupyterhub Userguide - Linuzb&#39; 的博客</title><meta name="viewport" content="width=device-width, initial-scale=1">
	
  <meta itemprop="name" content="Jupyterhub Userguide">
  <meta itemprop="description" content="前置准备 本文是 jupyterhub on kubernetes 的使用文档，本文描述的环境基于 jupyterhub on kubernetes
在上述文档中，我们部署的 kubernetes master 节点 nodeIP 为 172.16.0.100, 因此以下教程中使用的访问 ip 都是 172.16.0.100
环境准备 内网访问 可以访问内网的浏览器
登录 使用浏览器访问 http://172.16.0.100:30080/ 认证 点击 Singn in with Github，然后在 github 页面授权
说明：
这里仅使用 github oauth 做认证鉴权，暂无其它依赖，原理课参考文档 Authorizing OAuth apps - GitHub Docs github 账号的用户名需要为全字母及数字，暂不支持非字母数字之外的其他符号 应用选择 登录完成之后就会进入一个应用服务页面
选择一个合适的应用环境，然后点击底部的 start 按钮，即可进入环境 自定义应用 TODO： 待补充
应用环境介绍 功能介绍 界面简介 应用创建完成后，就会跳转到jupyterlab页面 介绍一下主要功能
启动一个luncher，即页面右侧部分，在 luncher 中可以打开各种工具 上传文件按钮，点击后弹出一个对话框，选择需要上传到文件即可。如果想上传一个目录，可以先在本地将目录打包成一个压缩包，然后上传。上传前可以先按照3. 切换到对应的工作目录。 工作目录，双击可打开文件以及文件夹。上传文件以及打开vscode都是以工作目录为基础，例如，当前工作目录为~/Projects/data, 则上传目标路径即为~/Projects/data 新建一个jupyter notebook 以工作目录为基础打开vscode 打开一个terminal，可执行linux命令 vscode 打开方式：在luncher 中点击vscode 图标即可打开">
  <meta itemprop="datePublished" content="2024-04-28T16:33:37+08:00">
  <meta itemprop="dateModified" content="2024-04-28T16:33:37+08:00">
  <meta itemprop="wordCount" content="169">
  <meta itemprop="keywords" content="Kubernetes,Jupyterhub,Jupyterlab,Jupyter,Docker,VsCode,Pycharm"><meta property="og:url" content="https://linuzb.github.io/2024/04/jupyterhub-userguide/">
  <meta property="og:site_name" content="Linuzb&#39; 的博客">
  <meta property="og:title" content="Jupyterhub Userguide">
  <meta property="og:description" content="前置准备 本文是 jupyterhub on kubernetes 的使用文档，本文描述的环境基于 jupyterhub on kubernetes
在上述文档中，我们部署的 kubernetes master 节点 nodeIP 为 172.16.0.100, 因此以下教程中使用的访问 ip 都是 172.16.0.100
环境准备 内网访问 可以访问内网的浏览器
登录 使用浏览器访问 http://172.16.0.100:30080/ 认证 点击 Singn in with Github，然后在 github 页面授权
说明：
这里仅使用 github oauth 做认证鉴权，暂无其它依赖，原理课参考文档 Authorizing OAuth apps - GitHub Docs github 账号的用户名需要为全字母及数字，暂不支持非字母数字之外的其他符号 应用选择 登录完成之后就会进入一个应用服务页面
选择一个合适的应用环境，然后点击底部的 start 按钮，即可进入环境 自定义应用 TODO： 待补充
应用环境介绍 功能介绍 界面简介 应用创建完成后，就会跳转到jupyterlab页面 介绍一下主要功能
启动一个luncher，即页面右侧部分，在 luncher 中可以打开各种工具 上传文件按钮，点击后弹出一个对话框，选择需要上传到文件即可。如果想上传一个目录，可以先在本地将目录打包成一个压缩包，然后上传。上传前可以先按照3. 切换到对应的工作目录。 工作目录，双击可打开文件以及文件夹。上传文件以及打开vscode都是以工作目录为基础，例如，当前工作目录为~/Projects/data, 则上传目标路径即为~/Projects/data 新建一个jupyter notebook 以工作目录为基础打开vscode 打开一个terminal，可执行linux命令 vscode 打开方式：在luncher 中点击vscode 图标即可打开">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-28T16:33:37+08:00">
    <meta property="article:modified_time" content="2024-04-28T16:33:37+08:00">
    <meta property="article:tag" content="Kubernetes">
    <meta property="article:tag" content="Jupyterhub">
    <meta property="article:tag" content="Jupyterlab">
    <meta property="article:tag" content="Jupyter">
    <meta property="article:tag" content="Docker">
    <meta property="article:tag" content="VsCode">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Jupyterhub Userguide">
  <meta name="twitter:description" content="前置准备 本文是 jupyterhub on kubernetes 的使用文档，本文描述的环境基于 jupyterhub on kubernetes
在上述文档中，我们部署的 kubernetes master 节点 nodeIP 为 172.16.0.100, 因此以下教程中使用的访问 ip 都是 172.16.0.100
环境准备 内网访问 可以访问内网的浏览器
登录 使用浏览器访问 http://172.16.0.100:30080/ 认证 点击 Singn in with Github，然后在 github 页面授权
说明：
这里仅使用 github oauth 做认证鉴权，暂无其它依赖，原理课参考文档 Authorizing OAuth apps - GitHub Docs github 账号的用户名需要为全字母及数字，暂不支持非字母数字之外的其他符号 应用选择 登录完成之后就会进入一个应用服务页面
选择一个合适的应用环境，然后点击底部的 start 按钮，即可进入环境 自定义应用 TODO： 待补充
应用环境介绍 功能介绍 界面简介 应用创建完成后，就会跳转到jupyterlab页面 介绍一下主要功能
启动一个luncher，即页面右侧部分，在 luncher 中可以打开各种工具 上传文件按钮，点击后弹出一个对话框，选择需要上传到文件即可。如果想上传一个目录，可以先在本地将目录打包成一个压缩包，然后上传。上传前可以先按照3. 切换到对应的工作目录。 工作目录，双击可打开文件以及文件夹。上传文件以及打开vscode都是以工作目录为基础，例如，当前工作目录为~/Projects/data, 则上传目标路径即为~/Projects/data 新建一个jupyter notebook 以工作目录为基础打开vscode 打开一个terminal，可执行linux命令 vscode 打开方式：在luncher 中点击vscode 图标即可打开">
<link rel="stylesheet" type="text/css" media="screen" href="https://linuzb.github.io/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://linuzb.github.io/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="https://linuzb.github.io/css/dark.css" />

	<script src="https://linuzb.github.io/js/feather.min.js"></script>
	
		<script src="https://linuzb.github.io/js/main.js"></script>
</head>


<body>


	
	<div class="container wrapper">
		<div class="header">
	
	<h1 class="site-title"><a href="https://linuzb.github.io/">Linuzb&#39; 的博客</a></h1>
	<div class="site-description"><p>记录学习点滴</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/linuzb" title="Github"><i data-feather="github"></i></a></li><li><a href="/index.xml" title="RSS"><i data-feather="rss"></i></a></li><span class="scheme-toggle"><a href="#" id="scheme-toggle"></a></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/posts">All posts</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="/tags">Tags &amp; Stats</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
    <div class="post-header">
    
    <div class="meta">
        <div class="date">
            <span class="day">28</span>
            <span class="rest">Apr 2024</span>
        </div>
    </div>
    
    <div class="matter">
        <h1 class="title">Jupyterhub Userguide</h1>
    </div>
</div>


    
    
    <h2 id="前置准备">前置准备</h2>
<p>本文是 jupyterhub on kubernetes 的使用文档，本文描述的环境基于 <a href="https://linuzb.github.io/2024/04/jupyterhub-on-kubernetes/">jupyterhub on kubernetes</a></p>
<p>在上述文档中，我们部署的 kubernetes master 节点 nodeIP 为 172.16.0.100, 因此以下教程中使用的访问 ip 都是 172.16.0.100</p>
<h2 id="环境准备">环境准备</h2>
<h3 id="内网访问">内网访问</h3>
<p>可以访问内网的浏览器</p>
<h2 id="登录">登录</h2>
<p>使用浏览器访问 http://172.16.0.100:30080/

  <img src="/images/hub-login.png" alt="hub-login">

</p>
<h3 id="认证">认证</h3>
<p>点击 Singn in with Github，然后在 github 页面授权</p>
<p>说明：</p>
<ul>
<li>这里仅使用 github oauth 做认证鉴权，暂无其它依赖，原理课参考文档 <a href="https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/authorizing-oauth-apps">Authorizing OAuth apps - GitHub Docs</a></li>
<li>github 账号的用户名需要为全字母及数字，暂不支持非字母数字之外的其他符号</li>
</ul>
<h2 id="应用选择">应用选择</h2>
<p>登录完成之后就会进入一个应用服务页面</p>
<p>选择一个合适的应用环境，然后点击底部的 start 按钮，即可进入环境

  <img src="/images/server-options-0.png" alt="server-options">

</p>
<h3 id="自定义应用">自定义应用</h3>
<p>TODO： 待补充</p>
<h1 id="应用环境介绍">应用环境介绍</h1>
<h2 id="功能介绍">功能介绍</h2>
<h3 id="界面简介">界面简介</h3>
<p>应用创建完成后，就会跳转到jupyterlab页面

  <img src="/images/jupyterlab-home.png" alt="jupyterlab">

</p>
<p>介绍一下主要功能</p>
<ol>
<li>启动一个luncher，即页面右侧部分，在 luncher 中可以打开各种工具</li>
<li>上传文件按钮，点击后弹出一个对话框，选择需要上传到文件即可。如果想上传一个目录，可以先在本地将目录打包成一个压缩包，然后上传。上传前可以先按照3. 切换到对应的工作目录。</li>
<li>工作目录，双击可打开文件以及文件夹。上传文件以及打开vscode都是以工作目录为基础，例如，当前工作目录为<code>~/Projects/data</code>, 则上传目标路径即为<code>~/Projects/data</code></li>
<li>新建一个jupyter notebook</li>
<li>以工作目录为基础打开vscode</li>
<li>打开一个terminal，可执行linux命令</li>
</ol>
<h3 id="vscode">vscode</h3>
<p>打开方式：在luncher 中点击vscode 图标即可打开</p>
<p>如何返回jupyter 界面？
由于vscode界面没做跳转链接，将浏览器url中的 <code>/vscode</code> 及之后的内容全部删除即可返回jupyter页面</p>
<h4 id="切换目录">切换目录</h4>
<p>方法1： 返回jupyter 主界面，从左边工作栏切换目标项目目录，然后重新打开vscode

  <img src="/images/vscode-change-workdir.png" alt="vscode-cd">

</p>
<p>方法2： 直接在vscode菜单栏切换

  <img src="/images/vscode-open-folder.png" alt="vscode-open-folder">

</p>
<h4 id="插件安装">插件安装</h4>
<p>插件默认安装在用户 home 目录下，由于该目录是持久化的，直接在插件市场安装即可，后续环境的重建不会影响插件。</p>
<h4 id="用户配置">用户配置</h4>
<p>持久化方案和插件一样，直接修改配置即可</p>
<h3 id="terminal">Terminal</h3>
<h4 id="命令">命令</h4>
<p>已添加常用命令</p>
<ul>
<li>git</li>
<li>zip, unzip</li>
<li>curl</li>
</ul>
<h4 id="oh-my-zsh">oh-my-zsh</h4>
<p>TODO： 待补充如何修改自定义shell即配置</p>
<h2 id="存储">存储</h2>
<p>由于该软件底层使用的是容器服务，一旦应用被删除（底层容器被删除），则容器中的文件都将被删除。</p>
<p>本方案为每个用户的 <code>/home/{username}</code> 目录挂载了持久化存储，保存在 home 目录下的文件是持久化的，除非人工手动删除，否则容器的销毁不会影响该目录下的文件。因此，持久化的文件一定要保存在 home目录下。</p>
<p>首次登录验证用户目录是否持久化：首先进入 home 目录（在luncher中新开一个 terminal），输入命令 <code>cd ~/ &amp;&amp; touch test.txt</code>, 该命令是进入当前用户的home目录，然后销毁环境，重新进入环境查看 <code>~/test.txt</code> 是否存在。如果存在，说明已经挂载持久化盘，如果不存在请联系管理员</p>
<h2 id="网络">网络</h2>
<h3 id="外网">外网</h3>
<p>未做外网限制，请注意流量消耗</p>
<p>TODO： 流量监控</p>
<h3 id="kubernetes-内网">kubernetes 内网</h3>
<p>可以访问kubernetes 内网，即可以向 kubernetes 提交作业，待补充。</p>
<h2 id="销毁环境">销毁环境</h2>
<p>方法1：首先进入 jupyterlab 页面，点击 File-&gt;Hub Control Panel

  <img src="/images/hub-control-panel-link.png" alt="hub-control-link">

</p>
<p>然后进入新的界面

  <img src="/images/stop-server.png" alt="stop-server">

</p>
<p>双击 Stop My Server 按钮即可销毁环境</p>
<p>方法2 直接在浏览器输入 stop server 页面<code>/hub/home</code>, 即 http://172.16.0.100:30080/hub/home</p>
<h3 id="自动销毁环境">自动销毁环境</h3>
<p>为了提高资源利用率，本系统使用了超时自动销毁服务的功能。</p>
<p>当用户超过7d没有通过浏览器访问应用时，系统将自动销毁应用环境。用户再次登陆后需要重新选择并创建环境。</p>
<p>注意：</p>
<ol>
<li>超时时间时按照用户访问浏览器 url 的流量计算的，并非应用本身的活动</li>
<li>应用的销毁并不会影响用户home目录，但是如果应用销毁时刚好有写用户home目录的操作，则可能会有影响</li>
</ol>
<h1 id="监控">监控</h1>
<p>监控页面地址 http://172.16.0.100:30759/?orgId=1</p>
<p>参考 <a href="https://linuzb.github.io/2024/04/kubernetes-%E7%9B%91%E6%8E%A7%E9%83%A8%E7%BD%B2/">kubernetes monitoring</a></p>
<h1 id="自定义应用环境">自定义应用环境</h1>
<p>待补充</p>

    <hr class="footer-separator" />
<div class="tags">
    
    
    <ul class="flat">
        
        
        <li class="tag-li"><a href="/tags/kubernetes">Kubernetes</a>
        </li>
        
        
        <li class="tag-li"><a href="/tags/jupyterhub">Jupyterhub</a>
        </li>
        
        
        <li class="tag-li"><a href="/tags/jupyterlab">Jupyterlab</a>
        </li>
        
        
        <li class="tag-li"><a href="/tags/jupyter">Jupyter</a>
        </li>
        
        
        <li class="tag-li"><a href="/tags/docker">Docker</a>
        </li>
        
        
        <li class="tag-li"><a href="/tags/vscode">VsCode</a>
        </li>
        
        
        <li class="tag-li"><a href="/tags/pycharm">Pycharm</a>
        </li>
        
    </ul>
    
    
</div>


<div class="back">
    <a href="https://github.com/linuzb/linuzb-blog/blob/master/content/posts/jupyterhub-userguide.md" title="github"><i
            data-feather="github"></i> Edit this on GitHub</a>
</div>


<div class="back">
    <a href="https://linuzb.github.io/"><span aria-hidden="true">← Back</span></a>
</div>


<div class="back">
    
    
    Next time, we'll talk about <i>"10 Reasons why gcc SHOULD be re-written in JavaScript - You won&#39;t believe #8!"</i>
    
    
</div>

</div>

	</div>
	

	<div class="footer wrapper">
	<nav class="nav">
		<div>2024  © Copyright notice </div>
		
	</nav>
</div><script>feather.replace()</script>
	
</body>

</html>
