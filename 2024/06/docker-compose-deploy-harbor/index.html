<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Docker Compose Deploy Harbor - Linuzb&#39; 的博客</title><meta name="viewport" content="width=device-width, initial-scale=1">
	
  <meta itemprop="name" content="Docker Compose Deploy Harbor">
  <meta itemprop="description" content="下载 harbor 安装器 首先到官方 release 页面查找对应的版本号，使用以下命令下载
1 2 3 4 5 export HARBOR_VERSION=2.9.4 wget https://github.com/goharbor/harbor/releases/download/v${HARBOR_VERSION}/harbor-offline-installer-v${HARBOR_VERSION}.tgz tar xvf harbor-offline-installer-v${HARBOR_VERSION}.tgz cd harbor mv harbor.yml.tmp harbor.yml 编辑 harbor.yml 1 vim harbor.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 # 将 hostname 设置成自己的域名或者 ip hostname: 172.16.0.115 http: # port for http, default is 80. If https enabled, this port will redirect to https port # 修改端口 port: 6060 # 如果没有 https 可以将 https 相关的配置注释 # https related config # https: # # https port for harbor, default is 443 # port: 443 # # The path of cert and key files for nginx # certificate: /your/certificate/path # private_key: /your/private/key/path # The default data volume data_volume: /data 详细内容参考文档 Configure the Harbor YML File">
  <meta itemprop="datePublished" content="2024-06-05T08:55:26+08:00">
  <meta itemprop="dateModified" content="2024-06-05T08:55:26+08:00">
  <meta itemprop="wordCount" content="265">
  <meta itemprop="keywords" content="Harbor"><meta property="og:url" content="https://linuzb.github.io/2024/06/docker-compose-deploy-harbor/">
  <meta property="og:site_name" content="Linuzb&#39; 的博客">
  <meta property="og:title" content="Docker Compose Deploy Harbor">
  <meta property="og:description" content="下载 harbor 安装器 首先到官方 release 页面查找对应的版本号，使用以下命令下载
1 2 3 4 5 export HARBOR_VERSION=2.9.4 wget https://github.com/goharbor/harbor/releases/download/v${HARBOR_VERSION}/harbor-offline-installer-v${HARBOR_VERSION}.tgz tar xvf harbor-offline-installer-v${HARBOR_VERSION}.tgz cd harbor mv harbor.yml.tmp harbor.yml 编辑 harbor.yml 1 vim harbor.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 # 将 hostname 设置成自己的域名或者 ip hostname: 172.16.0.115 http: # port for http, default is 80. If https enabled, this port will redirect to https port # 修改端口 port: 6060 # 如果没有 https 可以将 https 相关的配置注释 # https related config # https: # # https port for harbor, default is 443 # port: 443 # # The path of cert and key files for nginx # certificate: /your/certificate/path # private_key: /your/private/key/path # The default data volume data_volume: /data 详细内容参考文档 Configure the Harbor YML File">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-05T08:55:26+08:00">
    <meta property="article:modified_time" content="2024-06-05T08:55:26+08:00">
    <meta property="article:tag" content="Harbor">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Docker Compose Deploy Harbor">
  <meta name="twitter:description" content="下载 harbor 安装器 首先到官方 release 页面查找对应的版本号，使用以下命令下载
1 2 3 4 5 export HARBOR_VERSION=2.9.4 wget https://github.com/goharbor/harbor/releases/download/v${HARBOR_VERSION}/harbor-offline-installer-v${HARBOR_VERSION}.tgz tar xvf harbor-offline-installer-v${HARBOR_VERSION}.tgz cd harbor mv harbor.yml.tmp harbor.yml 编辑 harbor.yml 1 vim harbor.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 # 将 hostname 设置成自己的域名或者 ip hostname: 172.16.0.115 http: # port for http, default is 80. If https enabled, this port will redirect to https port # 修改端口 port: 6060 # 如果没有 https 可以将 https 相关的配置注释 # https related config # https: # # https port for harbor, default is 443 # port: 443 # # The path of cert and key files for nginx # certificate: /your/certificate/path # private_key: /your/private/key/path # The default data volume data_volume: /data 详细内容参考文档 Configure the Harbor YML File">
<link rel="stylesheet" type="text/css" media="screen" href="https://linuzb.github.io/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://linuzb.github.io/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="https://linuzb.github.io/css/dark.css" />

	<script src="https://linuzb.github.io/js/feather.min.js"></script>
	
		<script src="https://linuzb.github.io/js/main.js"></script>
</head>


<body>


	
	<div class="container wrapper">
		<div class="header">
	
	<h1 class="site-title"><a href="https://linuzb.github.io/">Linuzb&#39; 的博客</a></h1>
	<div class="site-description"><p>记录学习点滴</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/linuzb" title="Github"><i data-feather="github"></i></a></li><li><a href="/index.xml" title="RSS"><i data-feather="rss"></i></a></li><span class="scheme-toggle"><a href="#" id="scheme-toggle"></a></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/posts">All posts</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="/tags">Tags &amp; Stats</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
    <div class="post-header">
    
    <div class="meta">
        <div class="date">
            <span class="day">05</span>
            <span class="rest">Jun 2024</span>
        </div>
    </div>
    
    <div class="matter">
        <h1 class="title">Docker Compose Deploy Harbor</h1>
    </div>
</div>


    
    
    <h2 id="下载-harbor-安装器">下载 harbor 安装器</h2>
<p>首先到官方 release 页面查找对应的版本号，使用以下命令下载</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#0086b3">export</span> <span style="color:#008080">HARBOR_VERSION</span><span style="color:#000;font-weight:bold">=</span>2.9.4
</span></span><span style="display:flex;"><span>wget https://github.com/goharbor/harbor/releases/download/v<span style="color:#d14">${</span><span style="color:#008080">HARBOR_VERSION</span><span style="color:#d14">}</span>/harbor-offline-installer-v<span style="color:#d14">${</span><span style="color:#008080">HARBOR_VERSION</span><span style="color:#d14">}</span>.tgz
</span></span><span style="display:flex;"><span>tar xvf harbor-offline-installer-v<span style="color:#d14">${</span><span style="color:#008080">HARBOR_VERSION</span><span style="color:#d14">}</span>.tgz
</span></span><span style="display:flex;"><span><span style="color:#0086b3">cd</span> harbor
</span></span><span style="display:flex;"><span>mv harbor.yml.tmp harbor.yml  
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="编辑-harboryml">编辑 harbor.yml</h2>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>vim harbor.yml
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># 将 hostname 设置成自己的域名或者 ip</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">hostname</span>:<span style="color:#bbb"> </span><span style="color:#099">172.16.0.115</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">http</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># port for http, default is 80. If https enabled, this port will redirect to https port</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># 修改端口</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">port</span>:<span style="color:#bbb"> </span><span style="color:#099">6060</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic"># 如果没有 https 可以将 https 相关的配置注释</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic"># https related config</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic"># https:</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   # https port for harbor, default is 443</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   port: 443</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   # The path of cert and key files for nginx</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   certificate: /your/certificate/path</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   private_key: /your/private/key/path</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic"># The default data volume</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">data_volume</span>:<span style="color:#bbb"> </span>/data<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>详细内容参考文档 <a href="https://goharbor.io/docs/1.10/install-config/configure-yml-file/">Configure the Harbor YML File</a></p>
<h2 id="生成配置并部署-docker-compose">生成配置并部署 docker compose</h2>
<p>执行以下命令</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo ./install.sh
</span></span></code></pre></td></tr></table>
</div>
</div><p>部署完成后即可通过 url 访问，本例中是 <code>http://172.16.0.155:6060</code></p>
<p>默认密码查看文档 <a href="https://goharbor.io/docs/1.10/install-config/configure-yml-file/">Configure the Harbor YML File</a></p>
<h2 id="客户端">客户端</h2>
<h3 id="配置私有镜像仓库">配置私有镜像仓库</h3>
<p>修改 <code>/etc/docker/daemon.json</code> 文件，添加 <code>insecure-registries</code></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&#34;runtimes&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&#34;nvidia&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&#34;args&#34;</span>: [],
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&#34;path&#34;</span>: <span style="color:#d14">&#34;nvidia-container-runtime&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&#34;registry-mirrors&#34;</span>: [
</span></span><span style="display:flex;"><span>      <span style="color:#d14">&#34;https://docker.m.daocloud.io&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#d14">&#34;https://dockerproxy.com&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#d14">&#34;https://docker.mirrors.ustc.edu.cn&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#d14">&#34;https://docker.nju.edu.cn&#34;</span>
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&#34;insecure-registries&#34;</span>: [
</span></span><span style="display:flex;"><span>      <span style="color:#d14">&#34;172.16.0.115:6060&#34;</span>
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>重启容器</p>
<pre tabindex="0"><code class="language-sehll" data-lang="sehll">sudo systemctl daemon-reload
sudo systemctl restart docker
</code></pre><h3 id="登录-harbor">登录 harbor</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker login 172.16.0.155:6060 -u admin
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># 输入密码</span>
</span></span><span style="display:flex;"><span>Harbor12345
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="推送镜像">推送镜像</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># docker tag image_id(本地需要push的镜像) ip:port/项目名/保存的镜像名(例如：xxx:version1)</span>
</span></span><span style="display:flex;"><span>docker tag goharbor/harbor-exporter:v2.9.4 172.16.0.155:6060/library/goharbor/harbor-exporter:v2.9.4
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="拉取镜像">拉取镜像</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># docker pull ip:port/项目名/保存的镜像名(例如：xxx:version1)</span>
</span></span><span style="display:flex;"><span>docker pull 172.16.0.155:6060/library/goharbor/harbor-exporter:v2.9.4
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>公开镜像可以无需登录 harbor 即可拉取</p>
</blockquote>
<h2 id="代理镜像仓库">代理镜像仓库</h2>
<p>我们可以使用代理缓存功能让一些访问受限环境能够访问互联网上的镜像，并且如果没有某个镜像，此时客户端第一次发起pull image 请求会从指定的代理仓库下载并缓存到harbor的仓库里，下次别的客户端再需要pull 这个镜像就无需从公网再去下载该镜像了，从而避免占用过多带宽或被docker hub 速率限制。</p>
<p>具体操作参考文档 <a href="https://www.lishuai.fun/2020/11/05/harbor-proxy/">使用harbor代理缓存docker hub</a></p>
<h2 id="参考">参考</h2>
<ul>
<li><a href="https://juejin.cn/post/7223027325037789241">通过docker-compose 快速部署 harbor - 掘金 (juejin.cn)</a></li>
<li><a href="https://goharbor.io/docs/1.10/install-config/">Harbor docs | Harbor Installation and Configuration (goharbor.io)</a></li>
</ul>

    <hr class="footer-separator" />
<div class="tags">
    
    
    <ul class="flat">
        
        
        <li class="tag-li"><a href="/tags/harbor">Harbor</a>
        </li>
        
    </ul>
    
    
</div>


<div class="back">
    <a href="https://github.com/linuzb/linuzb-blog/blob/master/content/posts/docker-compose-deploy-harbor.md" title="github"><i
            data-feather="github"></i> Edit this on GitHub</a>
</div>


<div class="back">
    <a href="https://linuzb.github.io/"><span aria-hidden="true">← Back</span></a>
</div>


<div class="back">
    
    
    Next time, we'll talk about <i>"10 Reasons why gcc SHOULD be re-written in JavaScript - You won&#39;t believe #8!"</i>
    
    
</div>

</div>

	</div>
	

	<div class="footer wrapper">
	<nav class="nav">
		<div>2024  © Copyright notice </div>
		
	</nav>
</div><script>feather.replace()</script>
	
</body>

</html>
